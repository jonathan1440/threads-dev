---
description: Rules for planning phases (Feature/Foundation)
globs: [".cursor/specs/**", ".cursor/commands/plan.md"]
alwaysApply: false
---

# Planning Mode Expectations

- Create or update requirements, design, and tasks before significant implementation.
- Use diagrams (Mermaid) for system, data, and task dependency visualization.
- Make tradeoffs and constraints explicit in design.md.
- Do not start implementation until the plan is explicitly approved.

# Planning Inputs

When `.cursor/specs/[feature-name]/requirements.md` exists, use it as the source for problem, scope, approach, and success criteria. Refine requirements and add design and tasks.

# Planning Outputs

Every feature plan should produce:
- `.cursor/specs/[feature-name]/requirements.md` (what and why).
- `.cursor/specs/[feature-name]/design.md` (how: architecture, data model, APIs; diagrams as mermaid in file or in diagrams/).
- `.cursor/specs/[feature-name]/tasks.md` (task breakdown, dependencies, checkpoints).
- `.cursor/specs/[feature-name]/review-log.md` (initialized; entries appended on review).

# Planning Quality Bar

- Requirements are concrete and testable.
- Risks are identified with mitigation strategies.
- Tasks are small enough to be implemented and reviewed independently.
- Dependencies between tasks are clearly represented (ideally with a Mermaid task graph).

